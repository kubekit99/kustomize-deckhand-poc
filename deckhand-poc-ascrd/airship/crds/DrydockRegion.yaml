---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: DrydockRegion.drydock.airship.org
  labels:
    application: drydock
spec:
  additionalPrinterColumns:
  group: drydock.airshipit.org
  version: v1alpha1
  names:
    kind: DrydockRegion
    plural: DrydockRegions
    shortNames:
    - DrydockRegion
  scope: Namespaced
  subresources:
    status: {}
  # validation:
  #   openAPIV3Schema:
  type: 'object'
  properties:
    tag_definitions:
      type: 'array'
      items:
        type: 'object'
        properties:
          tag:
            type: 'string'
          definition_type:
            type: 'string'
            enum:
              - 'lshw_xpath'
          definition:
            type: 'string'
        additionalProperties: false
    authorized_keys:
      type: 'array'
      items:
        type: 'string'
    repositories:
      # top level is class (e.g. apt, rpm)
      type: 'object'
      properties:
        remove_unlisted:
          type: 'boolean'
      additionalPropties:
        type: 'object'
        properties:
          repo_type:
            type: 'string'
            pattern: 'apt|rpm'
          url:
            type: 'string'
          distributions:
            type: 'array'
            items:
              type: 'string'
          subrepos:
            type: 'array'
            items:
              type: 'string'
          components:
            type: 'array'
            items:
              type: 'string'
          gpgkey:
            type: 'string'
          arches:
            type: 'array'
            items:
              type: 'string'
          options:
            type: 'object'
            additionalProperties:
              type: 'string'
        additionalProperties: false
        required:
          - 'repo_type'
          - 'url'
          - 'arches'
  additionalProperties: false
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
...
