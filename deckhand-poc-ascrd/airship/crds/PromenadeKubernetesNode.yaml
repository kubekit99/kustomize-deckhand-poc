---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: PromenadeKubernetesNode.promenade.airship.org
  labels:
    application: promenade
spec:
  additionalPrinterColumns:
  group: promenade.airshipit.org
  version: v1alpha1
  names:
    kind: PromenadeKubernetesNode
    plural: PromenadeKubernetesNodes
    shortNames:
    - PromenadeKubernetesNode
  scope: Namespaced
  subresources:
    status: {}
  # validation:
  #   openAPIV3Schema:
  definitions:
    hostname:
      type: string
      pattern: '^[a-z][a-z0-9-]+$'
    ip_address:
      type: string
      pattern: '^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))$'
    kubernetes_label:
      type: string
      # XXX add regex

  type: object
  properties:
    hostname:
      $ref: '#/definitions/hostname'

    ip:
      $ref: '#/definitions/ip_address'

    join_ip:
      $ref: '#/definitions/ip_address'

    labels:
      properties:
        static:
          type: array
          items:
            $ref: '#/definitions/kubernetes_label'
        dynamic:
          type: array
          items:
            $ref: '#/definitions/kubernetes_label'
      additionalProperties: false

  required:
    - ip
    - join_ip
  additionalProperties: false
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
...
